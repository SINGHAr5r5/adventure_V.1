{"version":3,"sources":["../../src/pages/chat/chat.module.ts","../../src/pages/chat/chat.ts"],"names":[],"mappings":"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","file":"31.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ChatPage } from './chat';\n\n@NgModule({\n  declarations: [\n    ChatPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(ChatPage),\n  ],\n})\nexport class ChatPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/chat/chat.module.ts","import { Component, ViewChild } from '@angular/core';\nimport { IonicPage, NavController, NavParams, Events, Content, Platform, AlertController } from 'ionic-angular';\nimport { ServiceFactoryThread } from '../../services/ServiceFactoryThread';\nimport { GlobalDataService } from '../../services/globaldata.service';\nimport * as firebase from 'Firebase';\nimport { Location, LocationStrategy, PathLocationStrategy } from '@angular/common';\nimport { Keyboard } from '@ionic-native/keyboard';\nimport * as $ from 'jquery'\n/**\n * Generated class for the ChatPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-chat',\n  templateUrl: 'chat.html',\n})\n\n\nexport class ChatPage {\n  @ViewChild(Content) content: Content;\n  mouth: any = [];\n  data = this.navParams.get('data');\n  roomN = this.navParams.get('room');\n  imguser = this.navParams.get('imguser');\n  key = this.navParams.get('key');\n  keyChat: any = [];\n  message: any = [];\n  room: string;\n  read: any = [];\n  dataSend: any = {\n    // data: this.navParams.get('data'),\n    imguser: this.gd.userProfile.user_path_img,\n    key: this.navParams.get('key'),\n    room_name: this.navParams.get('key'),\n    // roomN: this.navParams.get('room'),\n    user_id: this.gd.userProfile['user_id'],\n    user_firstname: this.data['user_firstname'],\n    user_lastname: this.data['user_lastname']\n  };\n  constructor(private alertCtrl: AlertController, public platform: Platform, private keyboard: Keyboard, private location: Location, public navCtrl: NavController, public navParams: NavParams, public events: Events, private gd: GlobalDataService, public serviceFactoryThread: ServiceFactoryThread) {\n    // console.log(this.data);\n    // console.log();\n\n    console.log(this.dataSend);\n    setTimeout(() => {\n      gd.chatKeyLog = this.navParams.get('key');\n      console.log(this.gd.chatKeyLog);\n    }, 300);\n    this.gd.clickGo = true;\n    if (gd.platformtype == 'ios') {\n      // keyboard.disableScroll(true);\n      keyboard.onKeyboardHide().subscribe(data => {\n        console.log('scrollBottom onKeyboardHide');\n        this.content.scrollToBottom();\n        this.scrollbottom();\n        setTimeout(() => {\n          this.scrollbottom();\n        }, 500);\n      });\n      keyboard.onKeyboardShow().subscribe(data => {\n        console.log('scrollBottom onKeyboardShow');\n        this.content.scrollToBottom();\n        this.scrollbottom();\n        setTimeout(() => {\n          this.scrollbottom();\n        }, 500);\n      });\n    }\n    this.sendMessage().then(data => {\n      this.gd.roomchat.filter(message => {\n        if (message.room_name === this.data['room_name']) {\n          message.noread = 0;\n        }\n        return message.room_name === this.data['room_name'];\n      });\n      // console.log(this.gd.roomchat);\n      // console.log(this.data.user_id);\n\n      this.keyChat = this.message.filter(message => message.status === '0' && message.id === this.data.user_id);\n      setTimeout(() => {\n        this.gd.sumNoti = parseInt(this.gd.sumNoti) - parseInt(this.keyChat.length);\n        for (let index = 0; index < this.keyChat.length; index++) {\n          let newData = firebase.database().ref('chatrooms/' + this.key + '/chats/' + this.keyChat[index]['key']).update({\n            status: '1'\n          });\n        }\n        this.scrollbottom();\n      }, 100);\n    });\n    // this.message = this.data['message'];\n\n    // this.read = this.message.filter(message => message.status === '0' && message.id !== this.data.user_id);\n    // this.keyChat = this.message.filter(message => message.status === '0' && message.id === this.data.user_id);\n    // setTimeout(() => {\n    //   this.gd.sumNoti = parseInt(this.gd.sumNoti) - parseInt(this.keyChat.length);\n    //   for (let index = 0; index < this.keyChat.length; index++) {\n    //     let newData = firebase.database().ref('chatrooms/' + this.key + '/chats/' + this.keyChat[index]['key']).update({\n    //       status: '1'\n    //     });\n    //   }\n    // }, 100);\n    // let newData = firebase.database().ref('chatrooms/'+this.key+'/chats').push();\n    // newData.update({\n    //   status: '1'\n    // });\n    setTimeout(() => {\n      $('#footer').hide();\n      $('.tabbar').hide();\n      setTimeout(() => {\n        $('page-chat .back-button.show-back-button').click(function () {\n          $('#footer').show();\n          $('.tabbar').show().css('display', 'flex');        \n          $('#sendmessage').css('display', 'none');\n        });\n      }, 200);\n\n      $(\"page-chat .scroll-content\").css(\"cssText\", \"padding-bottom: 25px !important;margin-top: 44px;\");\n      console.log('scrollBottom setTimeout');\n      this.content.scrollToBottom();\n    }, 200);\n\n    events.subscribe('Newmsg', (res) => {\n      // console.log(\"Newmsg\");\n    });\n\n    // serviceFactoryThread.ServiceThread('readmessenger', { 'room': this.roomN }, 'POST')\n    //   .then(data => {\n    //     if (data['res_code'] != \"00\") {\n    //       // console.log(data);\n    //     } else {\n    //       // console.log(data);\n    //     }\n    //   }, (err) => {\n    //     // console.log(err);\n    //   });\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad ChatPage');\n  }\n  ionViewDidLeave() {\n    console.log('ionViewDidLeave ChatPage');\n    $('#footer').show();\n    $('.tabbar').show().css('display', 'flex');\n    $('#sendmessage').css('display', 'none');\n    this.gd.chatKeyLog = \"\";\n    console.log(this.gd.chatKeyLog);\n\n  }\n\n  sendMessage() {\n    return new Promise((resolve, reject) => {\n      firebase.database().ref('chatrooms/' + this.key + '/chats').on('value', resp => {\n        this.snap(resp).then(data => {\n          // console.log('newroom');\n          console.log('resp',resp);\n          console.log('data',data);\n\n          var newIndex;\n          this.message = data;\n          for (let index = 0; index < this.message.length; index++) {\n            if (index == 0) {\n              newIndex = index;\n            } else {\n              newIndex = index - 1;\n            }\n\n            if (index == 0) {\n              this.message[index].showdate = true;\n            } else if (this.message[index][\"date\"] != this.message[newIndex][\"date\"]) {\n              this.message[index].showdate = true;\n            } else {\n              this.message[index].showdate = false;\n            }\n\n          }\n          // console.log(this.message);\n          setTimeout(() => {\n            // console.log('Chat');\n            // console.log(this.location.path());\n            let path = this.location.path().split('/');\n            if (path[(path.length) - 1] == 'chat') {\n              // this.read = this.message.filter(message => message.status === '0' && message.id !== this.data.user_id);\n              // console.log(this.message);\n\n              this.keyChat = this.message.filter(message => message.status === '0' && message.id === this.data.user_id);\n              // console.log(this.keyChat);\n\n              setTimeout(() => {\n                this.gd.sumNoti = parseInt(this.gd.sumNoti) - parseInt(this.keyChat.length);\n                for (let index = 0; index < this.keyChat.length; index++) {\n                  // console.log(this.keyChat[index]['key']);\n\n                  let newData = firebase.database().ref('chatrooms/' + this.key + '/chats/' + this.keyChat[index]['key']).update({\n                    status: '1'\n                  });\n                }\n              }, 100);\n            }\n          }, 1500);\n          setTimeout(() => {\n            try {\n              console.log('scrollBottom sendMessage');\n              this.content.scrollToBottom();\n            } catch (error) {\n\n            }\n          }, 100);\n          resolve(data);\n        });\n      });\n    });\n  }\n  messenger() {\n\n  }\n  send() {\n    let d = new Date();\n    d.getDate\n    this.mouth = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\n    console.log(this.mouth[d.getMonth()]);\n    // console.log('send');\n    if ($('ion-tab[aria-hidden=\"false\"] page-chat:last #send').val() != '') {\n      let newData = firebase.database().ref('chatrooms/' + this.key + '/chats').push();\n      newData.set({\n        user: this.gd.userProfile['user_firstname'] + \" \" + this.gd.userProfile['user_lastname'],\n        id: this.gd.userProfile['user_id'],\n        message: $('#send').val(),\n        sendDate: this.GetFormattedDate(),\n        chkDate: d.getDate(),\n        date: d.getDate() + \" \" + this.mouth[d.getMonth()],\n        status: '0'\n      });\n      // console.log(this.data);\n      // console.log($('#send').val());\n      this.gd.sendNoti(this.data[\"room_name\"], this.data['user_id'], $('#send').val(), this.gd.userProfile['user_firstname'] + \" \" + this.gd.userProfile['user_lastname'], this.dataSend)\n        .then(data => {\n          this.gd.chat();\n          if (data == '01') {\n            let alert = this.alertCtrl.create({\n              title: 'Notify user',\n              subTitle: this.data['user_firstname'] + \" \" + this.data['user_lastname'] + ' has deleted this chat room.',\n              buttons: [{\n                text: 'OK',\n                role: 'OK',\n                handler: () => {\n                  this.navCtrl.pop();\n                  this.gd.chat();\n                  $('#footer').show();\n                  $('.tabbar').show().css('display', 'flex');\n                  $('#sendmessage').css('display', 'none');\n                }\n              }]\n            });\n            alert.present();\n          }\n        })\n      $('#send').val('');\n    }\n  }\n\n  GetFormattedDate() {\n    // var d = new Date();\n    // console.log(d.getSeconds());\n\n    // if(d.getSeconds() < 10){\n    //   console.log(\"0\"+d.getSeconds());\n    // }else{\n    //   console.log(d.getSeconds());\n    // }\n\n    // return d.getHours() + \":\" + d.getMinutes();\n    let hours;\n    let minute;\n    var d = new Date();\n    if (d.getMinutes() < 10) {\n      minute = \"0\" + d.getMinutes();\n    } else {\n      minute = d.getMinutes();\n    }\n    if (d.getHours() < 10) {\n      hours = \"0\" + d.getHours();\n    } else {\n      hours = d.getHours();\n    }\n    return hours + \":\" + minute;\n  }\n\n\n\n  splitTime(time) {\n    return time = time.split(\" \")[1];\n  }\n\n  scrollbottom() {\n    setTimeout(() => {\n      console.log('scrollBottom Click');\n      this.scrollbottoms();\n      this.content.scrollToBottom();\n    }, 500);\n  }\n\n  scrollbottoms() {\n    setTimeout(() => {\n      console.log('scrollBottom Click');\n\n      this.content.scrollToBottom();\n    }, 500);\n  }\n\n  snap(data) {\n    return new Promise(resolve => {\n      let returnArr = [];\n      data.forEach(childSnapshot => {\n        let item = childSnapshot.val();\n        item.key = childSnapshot.key;\n        returnArr.push(item);\n      });\n      resolve(returnArr);\n      // return returnArr;\n    });\n\n  }\n\n}\n\nexport const snapshotToArray = snapshot => {\n  let returnArr = [];\n  snapshot.forEach(childSnapshot => {\n    let item = childSnapshot.val();\n    item.key = childSnapshot.key;\n    returnArr.push(item);\n  });\n\n  return returnArr;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/chat/chat.ts"],"sourceRoot":""}