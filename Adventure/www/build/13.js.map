{"version":3,"sources":["../../src/pages/save-image/save-image.module.ts","../../src/pages/save-image/save-image.ts"],"names":[],"mappings":"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","file":"13.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { SaveImagePage } from './save-image';\n\n@NgModule({\n  declarations: [\n    SaveImagePage,\n  ],\n  imports: [\n    IonicPageModule.forChild(SaveImagePage),\n  ],\n})\nexport class SaveImagePageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/save-image/save-image.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ViewController } from 'ionic-angular';\nimport { Http, Headers, Response, RequestOptions } from '@angular/http';\nimport { HttpClient, HttpHeaders, HttpParams } from '@angular/common/http';\nimport { Base64ToGallery, Base64ToGalleryOptions } from '@ionic-native/base64-to-gallery';\nimport { AndroidPermissions } from '@ionic-native/android-permissions';\n\n/**\n * Generated class for the SaveImagePage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\ndeclare var htmlTOcanvas: any;\ndeclare var QRCode: any;\n\n@IonicPage()\n@Component({\n  selector: 'page-save-image',\n  templateUrl: 'save-image.html',\n})\nexport class SaveImagePage {\n  hasWriteAccess: boolean = false;\n  image: any =  [ 'www.adventureearth.co/api/v2/img/cutSecsion.png',\n                  'www.adventureearth.co/api/v2/img/treecoconut.png',\n                  'www.adventureearth.co/api/v2/img/iconping.png',\n                ];\n  section:any = \"\";\n  logo:any = \"\";\n  ping:any = \"\";\n\n  image_base64: any = [];\n  image2: any = '';\n  dataGet: any = this.navParams.get('data');\n  meeting: any = this.navParams.get('meeting');\n  user_image: any = \"\";\n  packgeImage: any = [];\n\n  constructor(public viewCtrl: ViewController,private androidPermissions: AndroidPermissions, private base64ToGallery: Base64ToGallery, private http: HttpClient, public navCtrl: NavController, public navParams: NavParams) {\n    console.log(this.dataGet, this.meeting);\n\n    // this.image.forEach(element => {\n    //   this.getBase64ImageFromUrl(element).then(data => {\n    //     this.image_base64.push(data);\n    //   })\n    // });\n    this.getBase64ImageFromUrl(this.image[0]).then(data => {\n      this.section = data;\n    })\n    this.getBase64ImageFromUrl(this.image[1]).then(data => {\n      this.logo = data;\n    })\n    this.getBase64ImageFromUrl(this.image[2]).then(data => {\n      this.ping = data;\n    })\n\n    // this.dataGet.img.forEach(element => {\n    this.getBase64ImageFromUrl(this.dataGet.img[0].img_resize).then(data => {\n      console.log(data);\n      this.packgeImage.push(data);\n    })\n    // });\n    this.getBase64ImageFromUrl(this.dataGet.user.user_path_img).then(data => {\n      // console.log(data);\n      this.user_image = data;\n    })\n    setTimeout(() => {\n      new QRCode(document.getElementById(\"qrcode\"), this.dataGet.booking_code_order);\n    }, 200);\n    setTimeout(() => {\n      this.imageTo();\n      // console.log(this.image_base64);\n    }, 2000);\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad ImageCapturePage');\n    // this.checkPermissions();\n  }\n\n  imageTo() {\n    let t = this;\n    htmlTOcanvas(document.getElementById('container'), {\n      backgroundColor: 'null',\n    }).then(function (canvas) {\n      // t.image2 = canvas.toDataURL('image/png');\n      var base64URL = canvas.toDataURL('image/png').replace('data:image/png;base64,', '');\n      // let todecode = atob(base64URL);\n      // if (!t.hasWriteAccess) {\n      //   t.checkPermissions();\n      // }else{\n      t.base64ToGallery.base64ToGallery(base64URL).then(\n        res => console.log('Saved image to gallery ', res),\n        err => console.log('Error saving image to gallery ', err)\n      );\n      // }\n      // document.body.appendChild(canvas);\n    });\n  }\n  checkPermissions() {\n    this.androidPermissions\n      .checkPermission(this.androidPermissions\n        .PERMISSION.WRITE_EXTERNAL_STORAGE)\n      .then((result) => {\n        console.log('Has permission?', result.hasPermission);\n        this.hasWriteAccess = result.hasPermission;\n      }, (err) => {\n        this.androidPermissions\n          .requestPermission(this.androidPermissions\n            .PERMISSION.WRITE_EXTERNAL_STORAGE);\n      });\n    if (!this.hasWriteAccess) {\n      this.androidPermissions\n        .requestPermissions([this.androidPermissions\n          .PERMISSION.WRITE_EXTERNAL_STORAGE]);\n    }\n  }\n\n  close(){\n    this.viewCtrl.dismiss();\n  }\n  async  getBase64ImageFromUrl(imageUrl) {\n    const proxyurl = \"https://cors-anywhere.herokuapp.com/\";\n    console.log(imageUrl);\n    // if (imageUrl.search(\"./assets/\") == '-1') {\n    var res = await fetch(proxyurl + imageUrl);\n    var blob = await res.blob();\n    // } else {\n    //   var res = await fetch(imageUrl);\n    //   var blob = await res.blob();\n    //   // new XMLSerializer().serializeToString(document.getElementById(\"svg\"))\n    // }\n\n    return new Promise((resolve, reject) => {\n      var reader = new FileReader();\n      reader.onload = function () {\n        resolve(reader.result);\n      }\n      reader.onerror = () => {\n        return reject(this);\n      };\n      reader.readAsDataURL(blob);\n    })\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/save-image/save-image.ts"],"sourceRoot":""}