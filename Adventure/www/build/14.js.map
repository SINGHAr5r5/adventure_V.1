{"version":3,"sources":["../../src/pages/review/review.module.ts","../../src/pages/review/review.ts"],"names":[],"mappings":"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","file":"14.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ReviewPage } from './review';\n\n@NgModule({\n  declarations: [\n    ReviewPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(ReviewPage),\n  ],\n})\nexport class ReviewPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/review/review.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, LoadingController, ViewController } from 'ionic-angular';\nimport { GlobalDataService } from '../../services/globaldata.service';\nimport { ServiceFactoryThread } from '../../services/ServiceFactoryThread';\nimport { Base64 } from '@ionic-native/base64';\nimport { ImagePicker } from '@ionic-native/image-picker';\nimport * as firebase from 'Firebase';\nimport * as $ from 'jquery';\n\n/**\n * Generated class for the ReviewPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\ndeclare var EXIF: any;\ndeclare var canvasResize: any;\n\n@IonicPage()\n@Component({\n  selector: 'page-review',\n  templateUrl: 'review.html',\n})\nexport class ReviewPage {\n  tetxReview: any = '';\n  commentRate: any = 0;\n  widthPhoto: any = [];\n  heightPhoto: any = [];\n  photoresize: any = [];\n  imageArray: any = [];\n  dataGet: any = this.navParams.get('data');\n\n  constructor(public viewCtrl: ViewController, private imagePicker: ImagePicker, private base64: Base64, public navCtrl: NavController, public navParams: NavParams, private gd: GlobalDataService, public serviceFactoryThread: ServiceFactoryThread, public loadingCtrl: LoadingController) {\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad ReviewPage');\n    console.log(this.dataGet);\n\n  }\n\n  sendRate(score) {\n    console.log(score);\n\n    if (this.commentRate == score) {\n      this.commentRate = 0;\n    } else {\n      this.commentRate = score;\n    }\n  }\n  addPhoto() {\n    // if (this.gd.platformtype == 'ios') {\n    $('#filGallerys').click();\n    // } else {\n    //   this.chooser_image();\n    // }\n  }\n  changeListener($event): void {\n    $('#actionCamera').slideUp(200);\n    this.readThis($event.target);\n  }\n\n  readThis(inputValue: any): void {\n    console.log(inputValue.files.length);\n    if (inputValue.files.length <= 10) {\n      var t = this;\n      t.photoresize = [];\n      t.widthPhoto = [];\n      t.heightPhoto = [];\n      var Latitude = \"\";\n      var Longitude = \"\";\n      var key;\n      var countFile = inputValue.files;\n      let loading = this.loadingCtrl.create({\n        spinner: 'hide',\n        content: `\n          <div class='textCenter'>Please Wait.</div>\n          <div class='textCenter'>Image processing ...</div>\n            `\n      });\n      loading.present();\n      Object.keys(countFile).forEach(element => {\n        var resize = '';\n        var myReader: FileReader = new FileReader();\n        var file: File = inputValue.files[element];\n        canvasResize(file, {\n          width: '1000',\n          height: 0,\n          crop: false,\n          quality: 40,\n          rotate: 0,\n          callback: function (data, width, height) {\n            resize = data;\n            myReader.onloadend = (e) => {\n              t.widthPhoto.push(width);\n              t.heightPhoto.push(height);\n              t.photoresize.push(resize);\n            }\n            myReader.readAsDataURL(file);\n            if (parseInt(element) == (countFile.length - 1)) {\n              let setin = setInterval(() => {\n                if (t.photoresize.length == countFile.length) {\n                  console.log(t.photoresize);\n                  console.log(t.widthPhoto);\n                  console.log(t.heightPhoto);\n                  loading.dismiss();\n                  let photoHeight = ($('ng-component').width() * t.heightPhoto[0]) / t.widthPhoto[0];\n                  // $('ng-component').width();\n                  // t.gd.nextpage(t.navCtrl, 'PostphotoPage', { 'img': t.photoresize, 'Latitude': Latitude, 'Longitude': Longitude, 'key': key, 'heightPhoto': photoHeight.toFixed(0) });\n                  // t.photoresize = [];\n                  // t.widthPhoto = [];\n                  // t.heightPhoto = [];\n                  clearInterval(setin);\n                }\n              }, 1000)\n              console.log(t.photoresize);\n            }\n          }\n        });\n      });\n    } else {\n      this.gd.toast(\"Can select maximum 10 images\");\n      this.presentActionSheet(this.navCtrl);\n    }\n  }\n  toDecimal(number) {\n    return number[0].numerator + number[1].numerator /\n      (60 * number[1].denominator) + number[2].numerator / (3600 * number[2].denominator);\n  }\n  presentActionSheet(navCtrl) {\n    // this.photoresize = [];\n    // this.widthPhoto = [];\n    // this.heightPhoto = [];\n    // this.gd.stCamera = false;\n    // var vthis = this;\n    // console.log('.camera_Advertising');\n    // $('#actionCamera').slideDown(200);\n  }\n  chooser_image() {\n    var key = Date.now() + this.serviceFactoryThread.user_api_key;\n    let loading\n    let photoHeight;\n    let options = {\n      maximumImagesCount: 10,\n      quality: 20,\n      outputType: 0\n    }\n\n    this.imagePicker.getPictures(options).then((results) => {\n      var t = this;\n      var Latitude = \"\";\n      var Longitude = \"\";\n      var key;\n      let base6fAll = [];\n      for (let i = 0; i < results.length; i++) {\n        if (i == 0) {\n          loading = this.loadingCtrl.create({\n            spinner: 'hide',\n            content: `\n              <div class='textCenter'>Please Wait.</div>\n              <div class='textCenter'>Image processing ...</div>\n                `\n          });\n          loading.present();\n          let newimg = new Image();\n          newimg.onload = function () {\n            console.log(newimg.width + \", \" + newimg.height);\n            photoHeight = ($('ng-component').width() * newimg.width) / newimg.height;\n          };\n          newimg.src = results[i];\n        }\n        var img = new Image();\n        img.crossOrigin = 'Anonymous';\n        this.base64.encodeFile(results[i]).then((base64File: string) => {\n          console.log(base64File);\n          let imgURI = base64File.replace(\"data:image/*;charset=utf-8;base64,\", \"data:image/jpeg;base64,\");\n          base6fAll.push(imgURI);\n          this.photoresize.push(results[i]);\n          if (i == results.length - 1) {\n            setTimeout(() => {\n              // console.log(this.photoresize);\n              // this.gd.nextpage(this.navCtrl, 'PostphotoPage', { 'img': this.photoresize, 'Latitude': \"\", 'Longitude': '', 'key': key, 'heightPhoto': parseInt(photoHeight).toFixed(0) , \"base64\": base6fAll});\n              loading.dismiss();\n            }, 1000);\n            console.log('success');\n          }\n        }, (err) => {\n          console.log(err);\n        });\n        // CordovaExif.readData(results[i], function(exifObject) {\n        //   console.log(exifObject);\n        //  });\n        img.src = results[i];\n        console.log('Image URI: ' + results[i]);\n      }\n    }, (err) => { })\n  }\n  send_review() {\n    console.log(this.commentRate, this.tetxReview);\n\n    this.upload_img().then(data => {\n      console.log(JSON.stringify(data));\n      // let newData = firebase.database().ref('shopComment/' + this.dataGet.package_room_key + '/comment/').push();\n      // let datasend = {\n      //   fullname: this.gd.userProfile['user_firstname'] + \" \" + this.gd.userProfile['user_lastname'],\n      //   userId: this.gd.userProfile['user_id'],\n      //   comment: this.tetxReview,\n      //   rate: this.commentRate,\n      //   date: firebase.database.ServerValue.TIMESTAMP,\n      //   image: JSON.stringify(data),\n      //   status: '0'\n      // }\n      // newData.set(datasend);\n      let dataS = {\n        Package_ID: this.dataGet.packet_id,\n        Booking_Code: this.dataGet.booking_code_order,\n        User_ID: this.gd.userProfile['user_id'],\n        Score: this.commentRate\n      }\n      this.serviceFactoryThread.ServiceThread('package_rate', dataS, 'POST').then(data => {\n        this.dataGet.package_rate.Average = this.commentRate;\n        this.viewCtrl.dismiss();\n      });\n    });\n\n  }\n  upload_img() {\n    return new Promise(resolve => {\n      if (this.photoresize.length > 0) {\n        let datasend = {\n          user_id: this.gd.userProfile['user_id'],\n          img: JSON.stringify(this.photoresize),\n          booking_id: this.dataGet.booking_code_order,\n        }\n        console.log(datasend);\n        this.serviceFactoryThread.ServiceThread('upload_img_review', datasend, 'POST').then(data => {\n          if (data[\"res_code\"] == '00') {\n            resolve(data[\"res_result\"]);\n          }\n        })\n      }else{\n        resolve(\"\");\n      }\n\n    });\n\n  }\n  close() {\n    this.viewCtrl.dismiss();\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/review/review.ts"],"sourceRoot":""}